!function(e,n){"function"==typeof define&&define.amd?define([],n.bind(this,e,e.videojs)):"undefined"!=typeof module&&module.exports?module.exports=n(e,e.videojs):n(e,e.videojs)}(window,function(e,n){"use strict";function l(e,l){var t,i,a,r,d=!1,o=!1,s="Up Next",c=30,u=0;if(e.upnext.title=function(e){e.length>1&&(s=e)},e.upnext.offset=function(e){parseInt(e)>1&&(c=e)},!Array.isArray(l)&&l.title&&(l.sources||l.url)&&l.poster){var v=[];v[0]=l,l=v}if(Array.isArray(l)){for(var p=[],h=0;h<l.length;h++)if(l[h].title&&(l[h].sources||l[h].url)&&l[h].poster){var m=y("img");m.src=l[h].poster,l[h].img=m,p.push(l[h])}p.length>1?(i=p[1],u=1):i=p[0];var f=null,g=null,C=null,x=null;if(0!=p.length){n.dom.addClass(e.el(),"vjs-up-next"),e.on("timeupdate",function(){n.dom.hasClass(e.el(),"vjs-ad-playing")||n.dom.hasClass(e.el(),"vjs-dai")||p.length<1||p.length>1&&u==p.length-1||e.duration()===1/0||"8"===n.browser.IOS_VERSION&&0===e.duration()||(!0!==d&&e.currentTime()>0&&e.duration()-e.currentTime()<c&&function(){if(!d&&!o){f=y("div","vjs-upnext");var l=i.img;if(l.setAttribute("alt",i.title),f.appendChild(l),i.duration){var t=y("div","next-dur",i.duration);f.appendChild(t)}var a=y("span","upnext-right",'<span class="nextup">'+s+'</span><span class="vjs-up-title">'+i.title+"</span>");if(f.appendChild(a),i.nextURL){var r=y("a");r.href=i.nextURL,r.target="_blank",i.target?r.target=i.target:r.target="_blank",f.appendChild(r)}e.el().appendChild(f),setTimeout(()=>{f.className="vjs-upnext vjs-upnext-show"},500),d=!0,f.onclick=function(){p[0].nextURL?r&&r.click():(e.changeSource(i),f.onclick=null,e.el().removeChild(f),f=null,e.play(),1==p.length?(o=!0,n.dom.removeClass(e.el(),"vjs-up-next"),p.splice(0,1)):u<p.length-1&&(i=p[++u]))}}}(),d&&e.duration()-e.currentTime()>c&&(f&&(f.onclick=null,f.parentNode.removeChild(f),f=null),d=!1))}),e.on("ended",function(){n.dom.hasClass(e.el(),"vjs-ad-playing")||n.dom.hasClass(e.el(),"vjs-dai")||function(){if(0==p.length)return;n.dom.addClass(e.controlBar.el_,"vjs-hidden"),n.dom.addClass(e.el(),"vjs-up-next"),1==p.length&&(o=!0);f&&(f.onclick=null,f.parentNode.removeChild(f),f=null);C=y("div","vjs-nextup");var l=y("div","next-close");l.innerHTML="&#9447;",C.appendChild(l);var d=y("div","next-header","<span>"+e.localize("Up Next")+"</span>");C.appendChild(d),g=y("div","vjs-fullnext"),C.appendChild(g);var s=y("div","respo");if((a=y("div","img")).style.backgroundImage="url("+i.poster+")",s.appendChild(a),g.appendChild(s),i.duration){var c=y("div","full-dur",i.duration);g.appendChild(c)}var v=y("div","next-title",i.title);g.appendChild(v),1==p.length&&i.nextURL&&((r=y("a")).href=i.nextURL,i.target?r.target=i.target:r.target="_blank",g.appendChild(r));var h,m=y("div","progress");m.innerHTML='<svg viewBox="0 0 84 84" preserveAspectRatio="xMinYMin meet"><circle class="circle1" cx="40" cy="40" r="40"></circle><circle id="circle2" class="circle2" cx="40" cy="40" r="40"></circle><g style="transform: translate(77%,26%) rotate(90deg) scale(3, 3);fill: #fff;"><path d="M3 12.2V3.8c0-.8.8-1.3 1.5-.9l7.1 4.2c.6.4.6 1.3 0 1.7L4.5 13c-.7.5-1.5 0-1.5-.8z"></path></g></svg>',g.appendChild(m),s.onclick=function(){1==p.length&&r?r.click():(i=p[u],M())},l.onclick=function(){clearInterval(j),g.onclick=null,C&&(C.parentNode.removeChild(C),C=null),x&&(x.parentNode.removeChild(x),x=null),e.play(),e.one("playing",function(l){n.dom.removeClass(e.el(),"vjs-up-next"),n.dom.removeClass(e.controlBar.el_,"vjs-hidden"),o=!0,1==p.length&&(o=!0,p.splice(0,1),i=null)})},x=y("div","next-overlay");var j,k=2*Math.PI*170;if(e.el().appendChild(x),e.el().appendChild(C),p.length>1){var b="vjs-nav-prev",I="vjs-nav-next";0===u&&(b="vjs-nav-prev disabled"),u===p.length-1&&(I="vjs-nav-next disabled");var A=y("div",b,'<div class="icon"></div>'),N=y("div",I,'<div class="icon"></div>');function L(e,l){var t=y("div","img");t.style.backgroundImage="url("+p[e].poster+")",t.style.left="next"==l?"100%":"-100%";var i,r=100,d=-100;s.appendChild(t),i="next"==l?requestAnimationFrame(function e(){r-=3;if(r<=0)return cancelAnimationFrame(i),t.style.left=0,a.parentNode.removeChild(a),a=t,void(t=null);r>0&&(t.style.left=r+"%");i=requestAnimationFrame(e)}):requestAnimationFrame(function e(){d+=3;if(d>=0)return cancelAnimationFrame(i),t.style.left=0,a.parentNode.removeChild(a),a=t,void(t=null);d<0&&(t.style.left=d+"%");i=requestAnimationFrame(e)}),v.innerHTML=p[e].title,p[e].duration&&c?(c.innerHTML=p[e].duration,n.dom.removeClass(c,"vjs-hidden")):c&&n.dom.addClass(c,"vjs-hidden")}x.appendChild(A),x.appendChild(N),N.onclick=function(){++u>p.length-1?u=p.length-1:(u===p.length-1&&n.dom.addClass(N,"disabled"),n.dom.removeClass(A,"disabled"),clearInterval(j),h&&h.removeAttribute("stroke-dasharray"),L(u,"next"))},A.onclick=function(){--u<0?u=0:(clearInterval(j),h&&h.removeAttribute("stroke-dasharray"),0===u&&n.dom.addClass(A,"disabled"),n.dom.removeClass(N,"disabled"),L(u,"prev"))}}t=0,(u!=p.length-1||1==p.length)&&(j=setInterval(function(){h=document.getElementById("circle2"),t<.25?(h.setAttribute("stroke-dasharray",k*t+" "+k*(1-t)),t+=.001):(clearInterval(j),1==p.length&&r?r.click():M())},25));function M(){clearInterval(j),g.onclick=null,C&&(C.parentNode.removeChild(C),C=null),x&&(x.parentNode.removeChild(x),x=null),e.changeSource(i),e.play(),e.one("playing",function(l){n.dom.removeClass(e.el(),"vjs-up-next"),n.dom.removeClass(e.controlBar.el_,"vjs-hidden"),1==p.length&&(o=!0,p.splice(0,1),i=null)}),p.length>1&&u<p.length-1&&(i=p[++u])}}()});return e.on("dispose",function n(){f&&(f.onclick=null,f.parentNode.removeChild(f)),g&&(g.onclick=null,g.parentNode.removeChild(g)),clearInterval(progressInterval),e.off("dispose",n)}),this}}else console.log("Error: Upnext - Invalid list array");function y(e,n,l){var t=document.createElement(e);return n&&(t.className=n),l&&(t.innerHTML=l),t}}e.videojs_upnext={version:"0.1"};(n.registerPlugin||n.plugin)("upnext",function(e){this.ready(function(){l(this,e)})})});