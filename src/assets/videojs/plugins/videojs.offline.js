/**
 * @license
 * Copyright (c) 2022 The Nuevodevel Team. All rights reserved.
 * Offline Plugin Version 2.0
 */
/*eslint no-inner-declarations: "off"*/try{videojs.options.vhs.maxPlaylistRetries=1}catch(e){var oe=!0}try{videojs.options.errorDisplay=!1}catch(e){oe=!0}!function(e,o){"function"==typeof define&&define.amd?define([],o.bind(this,e,e.videojs)):"undefined"!=typeof module&&module.exports?module.exports=o(e,e.videojs):o(e,e.videojs)}(window,function(e,o){"use strict";function n(e,n){var t,i=o.mergeOptions||o.util.mergeOptions;return(n=i({offlineImage:"",offlineTimeout:30,liveSource:"",offlineCountdown:!1,liveStream:"",clock:0,label:"restart",loadTimeout:0},n||{})).label=(t=n.label).charAt(0).toUpperCase()+t.slice(1),e.on("ready",function(){var t,i=!1,l=o.dom,r=e.el(),f=null,a=null,s=function(e,o){try{return e.querySelector(o)}catch(e){return!1}};if(""!=n.offlineImage){document.createElement("img").src=n.offlineImage;var c=s(r,".vjs-error-display");c&&l.addClass(c,"vjs-abs-hidden"),(f=document.createElement("div")).className="vjs-poster",f.setAttribute("style",'top:100%;z-index:15999;opacity:1!important;pointer-events:"none";background-color:#000;'),r.appendChild(f),f.style.backgroundImage="url("+n.offlineImage+")",f.style.height=0,n.loadTimeout>0&&e.one("play",function(){setTimeout(function(){!0!==i&&(e.isOffline=!0,m())},n.loadTimeout),e.one("loaddeddata",function(){i=!0})}),e.on("error",function(){if(!e.isOffline){var o=e.error();1!=o.code&&2!=o.code&&4!=o.code&&3!=o.code&&-2!=o.code||(e.isOffline=!0,m())}}),setInterval(function(){if(!e.isOffline){var o=r.className;o.indexOf("vjs-has-started")>-1&&o.indexOf("vjs-ended")>-1&&(e.isOffline=!0,m())}},500),e.$(".vjs-tech").onerror=function(e){},e.offline.liveSource=function(e){n.liveStream=e},e.on("playing",function(){f.style.height=0,f.style.display="none",e.isOffline=!1,!0!==o.browser.IS_IOS&&e.muted(!1),clearTimeout(t);try{r.removeChild(a)}catch(e){}a=null})}function u(){f.style.top=0,f.style.height="100%",n.offlineCountdown&&null==a&&((a=document.createElement("div")).setAttribute("style","position:absolute;right:30px;bottom:25px;font-size:20px;color:#fff;font-family:sans-serif,Arial;text-shadow:1px 1px 1px #000;z-Index:16000"),r.appendChild(a))}function d(o){var n;e.src(o),e.load(),void 0!==(n=e.play())&&n.then(function(){return!0}).catch(function(o){e.muted(!0),e.play()})}function m(){var o=s(r,".vjs-loading-spinner");l.addClass(o,"vjs-abs-hidden"),n.clock=0,n.liveStream=e.currentSource(),u(),n.offlineCountdown&&null!=a&&(a.innerHTML=n.label+" "+p(n.offlineTimeout)),n.clock=0,function o(){clearTimeout(t),t=setTimeout(function(){n.clock++,n.offlineCountdown&&a&&(a.innerHTML=n.label+" "+p(n.offlineTimeout-n.clock)),n.clock>=n.offlineTimeout&&(n.clock=0,e.trigger("offlineLoop"),d(n.liveStream)),o()},1e3)}()}function p(e){var o=parseInt(e,10),n=(Math.floor(o/3600),Math.floor(o/60)%60),t=o%60,i="";return i=n>0?n>9?n+":":"0"+n+":":"0:",t>0?i+=t>9?t:"0"+t:i="0:00",i}}),this}e.videojs_offline={version:"2.0"};o.registerPlugin("offline",function(e){this.ready(function(){n(this,e)})})});